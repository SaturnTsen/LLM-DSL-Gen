{
    "question": "03-where - Multiple where\n\nThe keyword \"where\" generally denotes a table being filtered in Envision\n\nConsider table named \"Products\" where three vectors are defined:\n  - Product\n  - Color\n  - Price\nAnd table \"Orders\" containing columns OrderDate, Id, Product, Qty and Amount.\nRewrite vector \"Amount\" for Ref == 3 (Product == \"hat\"), and only if Qty sold was greater or equal than 3 by applying 5% discount on Amount.",
    "answer": "table Products [Ref] = with\n  [| as Ref , as Product, as Color    , as Price |]\n  [|    1   , \"shirt\"   , \"white,grey\", 10.50    |]\n  [|    2   , \"pants\"   , \"blue\"      , 15.00    |]\n  [|    3   , \"hat\"     , \"red\"       , 5.25     |]\n\ntable Orders = with\n  [| as OrderDate    , as Id , as Product, as Qty      , as Amount |]\n  [| date(2024,1,18) ,   1    , \"shirt\"   ,   1         , 10.50    |]\n  [| date(2024,3,15) ,   1    , \"shirt\"   ,   2         , 21.00    |]\n  [| date(2024,7,21) ,   2    , \"pants\"   ,   1         , 15.00    |]\n  [| date(2024,8,6)  ,   2    , \"pants\"   ,   1         , 15.00    |]\n  [| date(2024,9,19) ,   2    , \"pants\"   ,   1         , 15.00    |]\n  [| date(2024,10,4) ,   3    , \"hat\"     ,   3         , 15.75    |]\nexpect Orders.Ref = Orders.Id\n\nwhere Ref == 3 // This filter all tables containing Dimension \"Ref\"\n  where Orders.Qty >= 3\n    Orders.Amount = (1 - 0.05) * (Orders.Amount)",
    "ref": "where-03",
    "type": "coding"
}