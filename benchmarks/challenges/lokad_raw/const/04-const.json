{
    "question": "04-Const (NB: can't be NVN6 because of user def)\n\nThe const keyword indicates that the value taken by a variable is known at compile time and that it won’t change later at runtime. Those variables are primarily intended to control the files being read.\nConsider two files with the same structure \"/clean/ref/Catalog.ion\" and \"/clean/sim/Catalog.ion\" which contain 3 columns:\n - a text \"UId\" uniquely identifying a product, it is the primary dimension.\n - a number \"BuyPrice\" representing a buying price reference.\nThe file in /ref/ is the current production file. The file in /sim/ is a simulation file.\nCreate a user defined function which will decide which subfolder, ref or sim, should be read. The sim folder should be read if the today() date of the script is 2024-12-30 else it should be the ref folder being read. Make sure to flag your function as const.\n\nRead the Catalog file from the correct folder assuming today is 2024-12-30.\nDisplay the date considered and the average of the BuyPrice found in the file in a summary.",
    "answer": "```envision\ndef const pure folderPath(t: date, date_sim: date) with\n  p = if t == date_sim then \"/sim\" else \"/ref\"\n  return p\n\nconst fpath = folderPath(today(), date(2024,12,30))\n\nread \"/clean/{fpath}/Catalog.ion\" as Catalog[ref] with\n  \"UId\" as ref : text\n  BuyPrice : number\n\nshow summary \"Out of stocked products\" with\n  today() as \"Date considered\"\n  avg(Catalog.BuyPrice) as \"Avg BuyPrice\" {numbers: simple; unit:\"€\"}\n```",
    "ref": "",
    "type": "coding"
}